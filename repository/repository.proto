syntax = "proto3";

package repository;

option go_package = "/repository;repository";

service RepositoryService {
  rpc CreateUser(CreateUserRequest) returns (User);
  rpc DeleteUserByID(GetUserByIDRequest) returns (ErrorResponse);
  rpc DeleteUserByEmail(GetUserByEmailRequest) returns (ErrorResponse);
  rpc DeleteProfileByUserID(GetUserByIDRequest) returns (ErrorResponse);

  rpc GetUserByEmail(GetUserByEmailRequest) returns (User);
  rpc GetUserByID(GetUserByIDRequest) returns (User);

  rpc CreateRole(CreateRoleRequest) returns (ErrorResponse);
  rpc GetProfileByUserID(GetUserByIDRequest) returns (Profile);
  rpc GetProfileByEmail(GetUserByEmailRequest) returns (Profile);
}

message Profile {
  int64 id = 1;
  int64 userID = 2;
  string name = 3;
  string avatar = 4;
  string bio = 5;
  string createdAt = 6;
}

message CreateRoleRequest {
  int32 roleID = 1;
  string roleName = 2;
}

message ErrorResponse {
  string error = 1;
}

message User {
  int64 id = 1;
  string email = 2;
  string password = 3;
  int32 roleID = 4;
  string createdAt = 5;
}

message CreateUserRequest {
  string email = 1;
  string password = 2;
  int32 roleID = 3;
}

message GetUserByEmailRequest{
  string email = 1;
}

message GetUserByIDRequest {
  int64 id = 1;
}